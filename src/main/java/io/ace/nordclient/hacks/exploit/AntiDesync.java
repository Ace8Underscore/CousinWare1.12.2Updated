package io.ace.nordclient.hacks.exploit;

import io.ace.nordclient.hacks.Hack;
import io.ace.nordclient.mixin.accessor.IEntity;

public class AntiDesync extends Hack {

    public AntiDesync() {
        super("AutoDupeMarker", Category.EXPLOIT, 6560843);
    }

    int delay = 0;
    int packets = 0;
    boolean walkedOut = false;
    boolean waiting = false;

    public void onUpdate() {
        if (mc.player == null|| mc.world == null) return;
        delay++;
        if (mc.player.dimension == -1 && ((IEntity)mc.player).isInPortal() && !walkedOut) {
            mc.player.sendChatMessage("#goto " + (int)mc.player.posX + " " + (int)mc.player.posY + " " +  (int)(mc.player.posZ + 2));

                //mc.player.sendChatMessage("#goto portal");
                walkedOut = true;
                delay = 0;

        }

        if (mc.player.dimension == -1 && !((IEntity)mc.player).isInPortal() && walkedOut) {
        if (delay > 40) {
            mc.player.sendChatMessage("#goto portal");
            delay = 0;
        }
        }
        if (mc.player.dimension == 0 && ((IEntity)mc.player).isInPortal() && !waiting) {
            mc.player.sendChatMessage("#goto "+ (int)mc.player.posX + " " + (int)mc.player.posY + " " +  (int)(mc.player.posZ + 2));
            waiting = true;
            delay = 0;

        }


        if (delay > 100 && !((IEntity)mc.player).isInPortal() && waiting && walkedOut) {
            mc.player.sendChatMessage("#goto portal");

        }

        if (delay > 400 && ((IEntity)mc.player).isInPortal() && waiting && walkedOut) {
            walkedOut = false;
            waiting = false;
            delay = 0;
        }//


    }

    public void onDisable() {
        delay = 0;
        walkedOut = false;
        waiting = false;
    }
}
